{% extends "base.html" %}

{% block title %}Old vs New Tax Regime | Finucity{% endblock %}

{% block content %}
<section class="or-hero">
    <div class="container">
        <div class="or-hero__content reveal-up">
            <span class="or-hero__badge">Regime Tool</span>
            <h1 class="or-hero__title">Old vs New <span class="gradient-text">Tax Regime</span></h1>
            <p class="or-hero__subtitle">Side-by-side comparison based on YOUR income and deductions. Get a clear, personalized recommendation on which regime saves you more tax.</p>
        </div>
    </div>
</section>

<section class="or-section">
    <div class="container">
        <div class="or-calculator reveal-up">
            <div class="or-calc__header"><h2>Enter Your Details</h2><p>FY 2024-25 (AY 2025-26)</p></div>
            <div class="or-calc__form">
                <div class="or-calc__row">
                    <div class="or-calc__group"><label>Gross Annual Income (₹)</label><input type="number" id="orIncome" value="1500000" step="50000"></div>
                    <div class="or-calc__group"><label>Age Group</label><select id="orAge"><option value="general">Below 60</option><option value="senior">60-80</option><option value="supersenior">80+</option></select></div>
                </div>
                <div class="or-calc__divider"><span>Old Regime Deductions</span></div>
                <div class="or-calc__row">
                    <div class="or-calc__group"><label>80C (PPF, ELSS, LIC)</label><input type="number" id="or80C" value="150000" max="150000"><small>Max ₹1.5L</small></div>
                    <div class="or-calc__group"><label>80D (Health Insurance)</label><input type="number" id="or80D" value="25000"><small>Self: ₹25K / Parents: ₹50K</small></div>
                </div>
                <div class="or-calc__row">
                    <div class="or-calc__group"><label>HRA Exemption</label><input type="number" id="orHRA" value="120000"></div>
                    <div class="or-calc__group"><label>80CCD(1B) NPS</label><input type="number" id="orNPS" value="50000" max="50000"><small>Max ₹50K</small></div>
                </div>
                <div class="or-calc__row">
                    <div class="or-calc__group"><label>Home Loan Interest (24b)</label><input type="number" id="or24b" value="0" max="200000"><small>Max ₹2L</small></div>
                    <div class="or-calc__group"><label>Other Deductions</label><input type="number" id="orOther" value="0"></div>
                </div>
                <button class="or-calc__btn" onclick="compareRegimes()">Compare Regimes</button>
            </div>
            <div class="or-calc__results" id="orResults" style="display:none">
                <div class="or-compare-grid">
                    <div class="or-regime-box" id="orOldBox">
                        <h3>Old Regime</h3>
                        <div class="or-item"><span>Gross Income</span><span id="orOldGross"></span></div>
                        <div class="or-item"><span>Standard Deduction</span><span>-₹50,000</span></div>
                        <div class="or-item"><span>Total Deductions</span><span id="orOldDed"></span></div>
                        <div class="or-item"><span>Taxable Income</span><span id="orOldTaxable"></span></div>
                        <div class="or-item or-item--tax"><span>Tax + Cess</span><span id="orOldTax"></span></div>
                    </div>
                    <div class="or-vs">VS</div>
                    <div class="or-regime-box" id="orNewBox">
                        <h3>New Regime</h3>
                        <div class="or-item"><span>Gross Income</span><span id="orNewGross"></span></div>
                        <div class="or-item"><span>Standard Deduction</span><span>-₹75,000</span></div>
                        <div class="or-item"><span>Total Deductions</span><span>₹0</span></div>
                        <div class="or-item"><span>Taxable Income</span><span id="orNewTaxable"></span></div>
                        <div class="or-item or-item--tax"><span>Tax + Cess</span><span id="orNewTax"></span></div>
                    </div>
                </div>
                <div class="or-verdict" id="orVerdict"></div>
            </div>
        </div>
    </div>
</section>

<section class="or-section or-section--dark">
    <div class="container">
        <div class="section-header reveal-up"><span class="section-tag">Quick Guide</span><h2>When to Choose Which Regime</h2><div class="section-line"></div></div>
        <div class="or-guide-grid">
            <div class="or-guide reveal-up" style="--delay:0.1s">
                <h4 style="color:#667eea">Choose Old Regime If:</h4>
                <ul><li>Total deductions exceed ₹3.75L (at ₹15L income)</li><li>You claim HRA + 80C + 80D + NPS</li><li>You have home loan interest (Section 24b)</li><li>You invest in ELSS, PPF, NPS regularly</li></ul>
            </div>
            <div class="or-guide reveal-up" style="--delay:0.2s">
                <h4 style="color:#43e97b">Choose New Regime If:</h4>
                <ul><li>Total deductions are below ₹3.75L</li><li>You don't pay rent (no HRA benefit)</li><li>You prefer simplicity & lower rates</li><li>You're just starting your career</li></ul>
            </div>
        </div>
    </div>
</section>

<style>
@keyframes gradient-shift { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }
.reveal-up { opacity:0; transform:translateY(50px); transition:all 0.8s cubic-bezier(0.16,1,0.3,1); }
.reveal-up.revealed { opacity:1; transform:translate(0); }

.or-hero { padding:10rem 0 3rem; background:linear-gradient(180deg,var(--bg-main) 0%,rgba(255,107,107,0.03) 50%,var(--bg-main) 100%); margin-top:80px; text-align:center; }
.or-hero__content { max-width:700px; margin:0 auto; }
.or-hero__badge { display:inline-block; padding:0.5rem 1.5rem; background:rgba(255,107,107,0.1); border:1px solid rgba(255,107,107,0.3); border-radius:50px; color:#ff6b6b; font-size:0.85rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; margin-bottom:1.5rem; }
.or-hero__title { font-size:clamp(2.5rem,5vw,3.5rem); font-weight:900; color:var(--text-light); margin-bottom:1rem; }
.gradient-text { background:linear-gradient(135deg,#ff6b6b,#ffa07a,#ff6b6b); background-size:200% auto; -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; animation:gradient-shift 4s ease infinite; }
.or-hero__subtitle { color:var(--text-muted); font-size:1rem; line-height:1.7; }

.or-section { padding:4rem 0; } .or-section--dark { background:rgba(0,0,0,0.15); padding:5rem 0; }
.section-header { text-align:center; margin-bottom:3rem; }
.section-tag { display:inline-block; padding:0.4rem 1.2rem; background:rgba(255,107,107,0.08); border:1px solid rgba(255,107,107,0.15); border-radius:50px; color:#ff6b6b; font-size:0.8rem; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:1rem; }
.section-header h2 { font-size:2rem; font-weight:800; color:var(--text-light); margin-bottom:1rem; }
.section-line { width:60px; height:3px; background:linear-gradient(135deg,#ff6b6b,#ffa07a); margin:0 auto; border-radius:2px; }

.or-calculator { max-width:800px; margin:0 auto; background:var(--bg-alt); padding:2.5rem; border-radius:20px; border:1px solid rgba(255,107,107,0.1); }
.or-calc__header { text-align:center; margin-bottom:2rem; } .or-calc__header h2 { color:var(--text-light); font-size:1.4rem; margin-bottom:0.3rem; } .or-calc__header p { color:var(--text-muted); font-size:0.85rem; }
.or-calc__form { display:flex; flex-direction:column; gap:1rem; }
.or-calc__row { display:grid; grid-template-columns:1fr 1fr; gap:1.2rem; }
.or-calc__divider { text-align:center; padding:0.8rem 0 0.3rem; } .or-calc__divider span { color:#ff6b6b; font-size:0.82rem; font-weight:600; text-transform:uppercase; letter-spacing:1px; }
.or-calc__group { display:flex; flex-direction:column; gap:0.3rem; }
.or-calc__group label { font-size:0.82rem; color:var(--text-muted); font-weight:600; }
.or-calc__group input, .or-calc__group select { background:rgba(255,255,255,0.05); border:1px solid rgba(255,107,107,0.15); border-radius:10px; padding:0.7rem 1rem; color:var(--text-light); font-size:1rem; transition:border-color 0.3s; }
.or-calc__group input:focus, .or-calc__group select:focus { outline:none; border-color:rgba(255,107,107,0.5); }
.or-calc__group small { color:var(--text-muted); font-size:0.72rem; opacity:0.7; }
.or-calc__group select option { background:var(--bg-alt); color:var(--text-light); }
.or-calc__btn { padding:1rem; background:linear-gradient(135deg,#ff6b6b,#ffa07a); color:#000; border:none; border-radius:12px; font-weight:700; font-size:1rem; cursor:pointer; transition:all 0.3s; margin-top:0.5rem; }
.or-calc__btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(255,107,107,0.35); }

.or-compare-grid { display:grid; grid-template-columns:1fr auto 1fr; gap:1.5rem; align-items:center; margin-top:2rem; margin-bottom:1.5rem; }
.or-regime-box { padding:1.5rem; border-radius:16px; border:1px solid rgba(255,107,107,0.08); background:rgba(255,255,255,0.02); transition:all 0.3s; }
.or-regime-box--winner { border-color:rgba(67,233,123,0.3); background:rgba(67,233,123,0.04); box-shadow:0 0 25px rgba(67,233,123,0.08); }
.or-regime-box h3 { text-align:center; color:var(--text-light); margin-bottom:1rem; font-size:1.1rem; }
.or-vs { font-size:1.5rem; font-weight:900; color:rgba(255,107,107,0.4); }
.or-item { display:flex; justify-content:space-between; padding:0.45rem 0; border-bottom:1px solid rgba(255,255,255,0.03); font-size:0.85rem; }
.or-item span:first-child { color:var(--text-muted); } .or-item span:last-child { color:var(--text-light); font-weight:600; }
.or-item--tax { border-top:2px solid rgba(255,107,107,0.15); border-bottom:none; padding-top:0.8rem; margin-top:0.3rem; }
.or-item--tax span:last-child { font-size:1.15rem; font-weight:800; }
.or-verdict { text-align:center; padding:1.2rem 1.5rem; border-radius:12px; font-weight:700; font-size:1rem; }
.or-verdict--old { background:rgba(102,126,234,0.08); border:1px solid rgba(102,126,234,0.2); color:#667eea; }
.or-verdict--new { background:rgba(67,233,123,0.08); border:1px solid rgba(67,233,123,0.2); color:#43e97b; }

.or-guide-grid { display:grid; grid-template-columns:1fr 1fr; gap:2rem; max-width:800px; margin:0 auto; }
.or-guide { background:var(--bg-alt); padding:2rem; border-radius:16px; border:1px solid rgba(255,107,107,0.08); transition:all 0.3s; transition-delay:var(--delay,0s); }
.or-guide:hover { border-color:rgba(255,107,107,0.2); transform:translateY(-4px); }
.or-guide h4 { font-size:1.1rem; margin-bottom:1rem; }
.or-guide ul { list-style:none; padding:0; margin:0; }
.or-guide li { padding:0.4rem 0; color:var(--text-muted); font-size:0.88rem; padding-left:1.2rem; position:relative; }
.or-guide li::before { content:'✓'; position:absolute; left:0; color:inherit; font-weight:700; }

@media (max-width:768px) { .or-hero { padding:7rem 1rem 2rem; } .or-calc__row, .or-compare-grid, .or-guide-grid { grid-template-columns:1fr; } .or-vs { text-align:center; } }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) { const d=getComputedStyle(entry.target).getPropertyValue('--delay')||'0s'; setTimeout(()=>entry.target.classList.add('revealed'),parseFloat(d)*1000); observer.unobserve(entry.target); } });
    }, { threshold:0.1, rootMargin:'0px 0px -50px 0px' });
    document.querySelectorAll('.reveal-up').forEach(el=>observer.observe(el));
});
function compareRegimes(){
    const income=parseInt(document.getElementById('orIncome').value)||0;
    const d80c=Math.min(parseInt(document.getElementById('or80C').value)||0,150000);
    const d80d=parseInt(document.getElementById('or80D').value)||0;
    const hra=parseInt(document.getElementById('orHRA').value)||0;
    const nps=Math.min(parseInt(document.getElementById('orNPS').value)||0,50000);
    const d24b=Math.min(parseInt(document.getElementById('or24b').value)||0,200000);
    const other=parseInt(document.getElementById('orOther').value)||0;
    const oldSD=50000, newSD=75000;
    const totalDed=d80c+d80d+hra+nps+d24b+other;
    const oldTaxable=Math.max(income-oldSD-totalDed,0);
    const newTaxable=Math.max(income-newSD,0);
    function calcOld(ti){let t=0;if(ti>1000000)t=(ti-1000000)*0.30+500000*0.20+250000*0.05;else if(ti>500000)t=(ti-500000)*0.20+250000*0.05;else if(ti>250000)t=(ti-250000)*0.05;if(ti<=500000)t=0;return t;}
    function calcNew(ti){let t=0;if(ti>1500000)t=(ti-1500000)*0.30+300000*0.20+200000*0.15+300000*0.10+400000*0.05;else if(ti>1200000)t=(ti-1200000)*0.20+200000*0.15+300000*0.10+400000*0.05;else if(ti>1000000)t=(ti-1000000)*0.15+300000*0.10+400000*0.05;else if(ti>700000)t=(ti-700000)*0.10+400000*0.05;else if(ti>300000)t=(ti-300000)*0.05;if(ti<=700000)t=0;return t;}
    const oldTax=calcOld(oldTaxable),newTax=calcNew(newTaxable);
    const oldTotal=oldTax+oldTax*0.04, newTotal=newTax+newTax*0.04;
    const f=n=>'₹ '+Math.round(n).toLocaleString('en-IN');
    document.getElementById('orOldGross').textContent=f(income);document.getElementById('orNewGross').textContent=f(income);
    document.getElementById('orOldDed').textContent='-'+f(totalDed);
    document.getElementById('orOldTaxable').textContent=f(oldTaxable);document.getElementById('orNewTaxable').textContent=f(newTaxable);
    document.getElementById('orOldTax').textContent=f(oldTotal);document.getElementById('orNewTax').textContent=f(newTotal);
    const v=document.getElementById('orVerdict'),ob=document.getElementById('orOldBox'),nb=document.getElementById('orNewBox');
    ob.classList.remove('or-regime-box--winner');nb.classList.remove('or-regime-box--winner');
    v.className='or-verdict';
    if(oldTotal<=newTotal){
        ob.classList.add('or-regime-box--winner');v.classList.add('or-verdict--old');
        v.innerHTML='&#9989; <strong>Old Regime</strong> saves you <strong>'+f(Math.round(newTotal-oldTotal))+'</strong> more per year';
    }else{
        nb.classList.add('or-regime-box--winner');v.classList.add('or-verdict--new');
        v.innerHTML='&#9989; <strong>New Regime</strong> saves you <strong>'+f(Math.round(oldTotal-newTotal))+'</strong> more per year';
    }
    document.getElementById('orResults').style.display='block';
}
</script>
{% endblock %}
