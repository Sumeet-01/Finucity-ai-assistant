{% extends "base.html" %}

{% block title %}HRA Calculator | Finucity{% endblock %}

{% block content %}
<section class="hc-hero">
    <div class="container">
        <div class="hc-hero__content reveal-up">
            <span class="hc-hero__badge">HRA Tool</span>
            <h1 class="hc-hero__title">HRA Exemption <span class="gradient-text">Calculator</span></h1>
            <p class="hc-hero__subtitle">Calculate the exact House Rent Allowance exemption under Section 10(13A). Compares all three rules and picks the one that saves you the most tax.</p>
        </div>
    </div>
</section>

<section class="hc-section">
    <div class="container">
        <div class="hc-calculator reveal-up">
            <div class="hc-calc__header"><h2>Enter Salary &amp; Rent Details</h2></div>
            <div class="hc-calc__form">
                <div class="hc-calc__row">
                    <div class="hc-calc__group"><label>Basic Salary (Annual)</label><input type="number" id="hcBasic" value="600000" step="10000"><small>Your basic pay per year</small></div>
                    <div class="hc-calc__group"><label>DA Forming Part of Salary</label><input type="number" id="hcDA" value="0" step="5000"><small>Dearness Allowance, if applicable</small></div>
                </div>
                <div class="hc-calc__row">
                    <div class="hc-calc__group"><label>HRA Received (Annual)</label><input type="number" id="hcHRA" value="240000" step="5000"><small>Total HRA from employer per year</small></div>
                    <div class="hc-calc__group"><label>Rent Paid (Annual)</label><input type="number" id="hcRent" value="180000" step="5000"><small>Total rent you pay per year</small></div>
                </div>
                <div class="hc-calc__row">
                    <div class="hc-calc__group"><label>City Type</label><select id="hcCity"><option value="metro">Metro (Delhi, Mumbai, Chennai, Kolkata)</option><option value="nonmetro">Non-Metro</option></select></div>
                </div>
                <button class="hc-calc__btn" onclick="calcHRA()">Calculate HRA Exemption</button>
            </div>
            <div class="hc-calc__results" id="hcResults" style="display:none">
                <div class="hc-rules-grid">
                    <div class="hc-rule" id="hcRule1Box"><span class="hc-rule__label">Rule 1: Actual HRA Received</span><span class="hc-rule__value" id="hcRule1"></span></div>
                    <div class="hc-rule" id="hcRule2Box"><span class="hc-rule__label">Rule 2: Rent – 10% of Salary</span><span class="hc-rule__value" id="hcRule2"></span></div>
                    <div class="hc-rule" id="hcRule3Box"><span class="hc-rule__label">Rule 3: 50%/40% of Salary</span><span class="hc-rule__value" id="hcRule3"></span></div>
                </div>
                <div class="hc-final"><div class="hc-final__card"><span class="hc-final__label">Your HRA Exemption (Minimum of above three)</span><span class="hc-final__value" id="hcExemption"></span><small id="hcNote"></small></div></div>
            </div>
        </div>
    </div>
</section>

<section class="hc-section hc-section--dark">
    <div class="container">
        <div class="section-header reveal-up"><span class="section-tag">How It Works</span><h2>HRA Exemption Rules</h2><div class="section-line"></div></div>
        <div class="hc-info-grid">
            <div class="hc-info reveal-up" style="--delay:0.1s"><h4>&#9312; Actual HRA Received</h4><p>The total HRA component your employer pays you annually.</p></div>
            <div class="hc-info reveal-up" style="--delay:0.15s"><h4>&#9313; Rent Paid – 10% of Salary</h4><p>Actual rent paid minus 10% of (Basic + DA). If you pay ₹15K/month rent and 10% of salary is ₹5K, this = ₹10K/month.</p></div>
            <div class="hc-info reveal-up" style="--delay:0.2s"><h4>&#9314; 50% or 40% of Salary</h4><p>50% of (Basic + DA) for Metro cities, 40% for Non-Metro. Higher salary = higher exemption here.</p></div>
            <div class="hc-info reveal-up" style="--delay:0.25s"><h4>&#127919; The Minimum Wins</h4><p>Tax law takes the <strong>minimum</strong> of all three — which actually gives you the maximum tax benefit since that's the exempted amount.</p></div>
        </div>
    </div>
</section>

<style>
@keyframes gradient-shift { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }
.reveal-up { opacity:0; transform:translateY(50px); transition:all 0.8s cubic-bezier(0.16,1,0.3,1); }
.reveal-up.revealed { opacity:1; transform:translate(0); }

.hc-hero { padding:10rem 0 3rem; background:linear-gradient(180deg,var(--bg-main) 0%,rgba(67,233,123,0.03) 50%,var(--bg-main) 100%); margin-top:80px; text-align:center; }
.hc-hero__content { max-width:700px; margin:0 auto; }
.hc-hero__badge { display:inline-block; padding:0.5rem 1.5rem; background:rgba(67,233,123,0.1); border:1px solid rgba(67,233,123,0.3); border-radius:50px; color:#43e97b; font-size:0.85rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; margin-bottom:1.5rem; }
.hc-hero__title { font-size:clamp(2.5rem,5vw,3.5rem); font-weight:900; color:var(--text-light); margin-bottom:1rem; }
.gradient-text { background:linear-gradient(135deg,#43e97b,#38f9d7,#43e97b); background-size:200% auto; -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; animation:gradient-shift 4s ease infinite; }
.hc-hero__subtitle { color:var(--text-muted); font-size:1rem; line-height:1.7; }

.hc-section { padding:4rem 0; } .hc-section--dark { background:rgba(0,0,0,0.15); padding:5rem 0; }
.section-header { text-align:center; margin-bottom:3rem; }
.section-tag { display:inline-block; padding:0.4rem 1.2rem; background:rgba(67,233,123,0.08); border:1px solid rgba(67,233,123,0.15); border-radius:50px; color:#43e97b; font-size:0.8rem; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:1rem; }
.section-header h2 { font-size:2rem; font-weight:800; color:var(--text-light); margin-bottom:1rem; }
.section-line { width:60px; height:3px; background:linear-gradient(135deg,#43e97b,#38f9d7); margin:0 auto; border-radius:2px; }

.hc-calculator { max-width:700px; margin:0 auto; background:var(--bg-alt); padding:2.5rem; border-radius:20px; border:1px solid rgba(67,233,123,0.1); }
.hc-calc__header { text-align:center; margin-bottom:2rem; } .hc-calc__header h2 { color:var(--text-light); font-size:1.4rem; }
.hc-calc__form { display:flex; flex-direction:column; gap:1rem; }
.hc-calc__row { display:grid; grid-template-columns:1fr 1fr; gap:1.2rem; }
.hc-calc__group { display:flex; flex-direction:column; gap:0.3rem; }
.hc-calc__group label { font-size:0.82rem; color:var(--text-muted); font-weight:600; }
.hc-calc__group input, .hc-calc__group select { background:rgba(255,255,255,0.05); border:1px solid rgba(67,233,123,0.15); border-radius:10px; padding:0.7rem 1rem; color:var(--text-light); font-size:1rem; transition:border-color 0.3s; }
.hc-calc__group input:focus, .hc-calc__group select:focus { outline:none; border-color:rgba(67,233,123,0.5); }
.hc-calc__group small { color:var(--text-muted); font-size:0.72rem; opacity:0.7; }
.hc-calc__group select option { background:var(--bg-alt); color:var(--text-light); }
.hc-calc__btn { padding:1rem; background:linear-gradient(135deg,#43e97b,#38f9d7); color:#000; border:none; border-radius:12px; font-weight:700; font-size:1rem; cursor:pointer; transition:all 0.3s; margin-top:0.5rem; }
.hc-calc__btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(67,233,123,0.35); }

.hc-rules-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:1rem; margin-top:2rem; margin-bottom:1.5rem; }
.hc-rule { background:rgba(255,255,255,0.03); padding:1.2rem; border-radius:12px; border:1px solid rgba(67,233,123,0.08); text-align:center; transition:all 0.3s; }
.hc-rule--active { border-color:rgba(67,233,123,0.4); background:rgba(67,233,123,0.06); }
.hc-rule__label { display:block; font-size:0.75rem; color:var(--text-muted); margin-bottom:0.5rem; text-transform:uppercase; letter-spacing:0.3px; }
.hc-rule__value { display:block; font-size:1.2rem; font-weight:800; color:var(--text-light); }
.hc-final { text-align:center; }
.hc-final__card { background:rgba(67,233,123,0.06); border:1px solid rgba(67,233,123,0.15); border-radius:16px; padding:1.5rem 2rem; display:inline-block; }
.hc-final__label { display:block; font-size:0.82rem; color:var(--text-muted); margin-bottom:0.5rem; text-transform:uppercase; letter-spacing:0.5px; }
.hc-final__value { display:block; font-size:2rem; font-weight:900; color:#43e97b; margin-bottom:0.3rem; }
.hc-final__card small { color:var(--text-muted); font-size:0.78rem; }

.hc-info-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:1.5rem; max-width:900px; margin:0 auto; }
.hc-info { background:var(--bg-alt); padding:2rem; border-radius:16px; border:1px solid rgba(67,233,123,0.08); transition:all 0.3s; transition-delay:var(--delay,0s); }
.hc-info:hover { border-color:rgba(67,233,123,0.2); transform:translateY(-4px); }
.hc-info h4 { color:var(--text-light); font-size:1rem; margin-bottom:0.6rem; } .hc-info p { color:var(--text-muted); font-size:0.85rem; line-height:1.6; margin:0; }

@media (max-width:768px) { .hc-hero { padding:7rem 1rem 2rem; } .hc-calc__row, .hc-rules-grid { grid-template-columns:1fr; } }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('revealed'); observer.unobserve(entry.target); } });
    }, { threshold:0.1, rootMargin:'0px 0px -50px 0px' });
    document.querySelectorAll('.reveal-up').forEach(el=>observer.observe(el));
});
function calcHRA(){
    const basic=parseInt(document.getElementById('hcBasic').value)||0;
    const da=parseInt(document.getElementById('hcDA').value)||0;
    const hra=parseInt(document.getElementById('hcHRA').value)||0;
    const rent=parseInt(document.getElementById('hcRent').value)||0;
    const city=document.getElementById('hcCity').value;
    const salary=basic+da;
    const rule1=hra;
    const rule2=Math.max(rent-salary*0.10,0);
    const rule3=(city==='metro')?salary*0.50:salary*0.40;
    const exempt=Math.min(rule1,rule2,rule3);
    const f=n=>'₹ '+Math.round(n).toLocaleString('en-IN');
    document.getElementById('hcRule1').textContent=f(rule1);
    document.getElementById('hcRule2').textContent=f(rule2);
    document.getElementById('hcRule3').textContent=f(rule3);
    document.getElementById('hcExemption').textContent=f(exempt);
    document.getElementById('hcNote').textContent='Taxable HRA = '+f(hra-exempt)+' | Tax saved ≈ '+f(exempt*0.30)+' (at 30% slab)';
    ['hcRule1Box','hcRule2Box','hcRule3Box'].forEach(id=>document.getElementById(id).classList.remove('hc-rule--active'));
    if(exempt===rule1)document.getElementById('hcRule1Box').classList.add('hc-rule--active');
    else if(exempt===rule2)document.getElementById('hcRule2Box').classList.add('hc-rule--active');
    else document.getElementById('hcRule3Box').classList.add('hc-rule--active');
    document.getElementById('hcResults').style.display='block';
}
</script>
{% endblock %}
